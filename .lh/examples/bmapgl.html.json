{
    "sourceFile": "examples/bmapgl.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1645445601501,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1645447378094,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n             color: #666;\n             box-shadow: 0 2px 6px 0 rgba(27, 142, 236, 0.5);\n         }\n     </style>\n-    <script src=\"//api.map.baidu.com/api?type=webgl&v=1.0&ak=Wx21SlsDyZ1BZFYXZdmuanxR\"></script>\n+    <script src=\"//api.map.baidu.com/api?type=webgl&v=1.0&ak=你的密钥\"></script>\n     <script src=\"./bmap-polylinearrows.min.js\"></script>\n </head>\n \n <body>\n"
                },
                {
                    "date": 1645495818587,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -31,9 +31,9 @@\n             color: #666;\n             box-shadow: 0 2px 6px 0 rgba(27, 142, 236, 0.5);\n         }\n     </style>\n-    <script src=\"//api.map.baidu.com/api?type=webgl&v=1.0&ak=你的密钥\"></script>\n+    <script src=\"//api.map.baidu.com/api?type=webgl&v=1.0&ak=hXTpnaemVlV0IB7tvTPjzHVcRFZXfbvi\"></script>\n     <script src=\"./bmap-polylinearrows.min.js\"></script>\n </head>\n \n <body>\n"
                }
            ],
            "date": 1645445601501,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>bmapgl polylinearrows example</title>\n    <style>\n        body,\n        html,\n        #container {\n            overflow: hidden;\n            width: 100%;\n            height: 100%;\n            margin: 0;\n            font-family: \"微软雅黑\";\n        }\n\n        .info {\n            z-index: 999;\n            width: auto;\n            min-width: 22rem;\n            padding: .75rem 1.25rem;\n            margin-left: 1.25rem;\n            position: fixed;\n            top: 1rem;\n            background-color: #fff;\n            border-radius: .25rem;\n            font-size: 14px;\n            color: #666;\n            box-shadow: 0 2px 6px 0 rgba(27, 142, 236, 0.5);\n        }\n    </style>\n    <script src=\"//api.map.baidu.com/api?type=webgl&v=1.0&ak=Wx21SlsDyZ1BZFYXZdmuanxR\"></script>\n    <script src=\"./bmap-polylinearrows.min.js\"></script>\n</head>\n\n<body>\n    <div id=\"container\"></div>\n</body>\n<script>\n    let map = new BMapGL.Map('container'); // 创建Map实例\n    map.centerAndZoom(new BMapGL.Point(121.5149319, 31.268328), 17); // 初始化地图,设置中心点坐标和地图级别\n    map.enableScrollWheelZoom(true); // 开启鼠标滚轮缩放\n\n    let data = {\n        geometry: {\n            \"type\": \"MultiLineString\",\n            \"coordinates\": [\n                [\n                    [\n                        121.50259791977119,\n                        31.234271035048522\n                    ],\n                    [\n                        121.5028609436245,\n                        31.234037681240462\n                    ],\n                    [\n                        121.50282492157355,\n                        31.23394474095766\n                    ],\n                    [\n                        121.50258192993311,\n                        31.233763723281374\n                    ],\n                    [\n                        121.50246991123602,\n                        31.233736705687715\n                    ],\n                    [\n                        121.50202489068637,\n                        31.234446725457403\n                    ],\n                    [\n                        121.50189993638993,\n                        31.234569693108806\n                    ],\n                    [\n                        121.50175989056093,\n                        31.234666723966356\n                    ],\n                    [\n                        121.50157187521768,\n                        31.234716744607788\n                    ],\n                    [\n                        121.50128989711811,\n                        31.234934735485933\n                    ],\n                    [\n                        121.50115991231081,\n                        31.23513474012597\n                    ],\n                    [\n                        121.50179995498667,\n                        31.235511745008008\n                    ],\n                    [\n                        121.50197988558031,\n                        31.235660724814885\n                    ],\n                    [\n                        121.4984939212183,\n                        31.23905269152327\n                    ],\n                    [\n                        121.4982739261989,\n                        31.239473678014225\n                    ],\n                    [\n                        121.49781291581118,\n                        31.24011773582157\n                    ],\n                    [\n                        121.49719092907607,\n                        31.241213719970606\n                    ],\n                    [\n                        121.49713092226801,\n                        31.24137372841386\n                    ],\n                    [\n                        121.49694093065264,\n                        31.24222571280417\n                    ],\n                    [\n                        121.49692089843977,\n                        31.24257575125138\n                    ],\n                    [\n                        121.49662894914903,\n                        31.244647705033497\n                    ],\n                    [\n                        121.49674887293462,\n                        31.245416687375002\n                    ],\n                    [\n                        121.49689790181873,\n                        31.246375687406516\n                    ],\n                    [\n                        121.49694793743562,\n                        31.24701468084072\n                    ],\n                    [\n                        121.49687786960585,\n                        31.247455698765226\n                    ],\n                    [\n                        121.4967069220673,\n                        31.24785673461007\n                    ],\n                    [\n                        121.4966759305272,\n                        31.24848668775087\n                    ],\n                    [\n                        121.49671590512241,\n                        31.248696696914894\n                    ],\n                    [\n                        121.49702689848995,\n                        31.24971370264669\n                    ],\n                    [\n                        121.49707594597079,\n                        31.250122678307022\n                    ],\n                    [\n                        121.49734687491261,\n                        31.250830721389608\n                    ],\n                    [\n                        121.4972059307781,\n                        31.251561681104832\n                    ],\n                    [\n                        121.49617287944162,\n                        31.251511746650895\n                    ],\n                    [\n                        121.49632289646179,\n                        31.25249970296929\n                    ],\n                    [\n                        121.49644192194187,\n                        31.253608739221786\n                    ],\n                    [\n                        121.49642188972899,\n                        31.25374873771323\n                    ],\n                    [\n                        121.4965818779403,\n                        31.254006738794047\n                    ],\n                    [\n                        121.49651189994108,\n                        31.254247683222616\n                    ],\n                    [\n                        121.49631094899851,\n                        31.255029706456323\n                    ],\n                    [\n                        121.49620988962863,\n                        31.25527967776508\n                    ],\n                    [\n                        121.49603993022615,\n                        31.25552169936474\n                    ],\n                    [\n                        121.49575795212657,\n                        31.256414688818627\n                    ],\n                    [\n                        121.49562688935266,\n                        31.256825718864068\n                    ],\n                    [\n                        121.49569686735188,\n                        31.25702475060041\n                    ],\n                    [\n                        121.49557694356629,\n                        31.257345716358014\n                    ],\n                    [\n                        121.49562688935266,\n                        31.257685742837353\n                    ],\n                    [\n                        121.49565689275668,\n                        31.257794711569904\n                    ],\n                    [\n                        121.49602690479624,\n                        31.258011722576693\n                    ],\n                    [\n                        121.49761986995709,\n                        31.258706740923635\n                    ],\n                    [\n                        121.49842187711639,\n                        31.25895971211919\n                    ],\n                    [\n                        121.49882288069605,\n                        31.25903673005923\n                    ],\n                    [\n                        121.50014491691509,\n                        31.25908774090442\n                    ],\n                    [\n                        121.50118587334005,\n                        31.259181736609783\n                    ],\n                    [\n                        121.50181693296082,\n                        31.259307681446106\n                    ],\n                    [\n                        121.50242787053814,\n                        31.259625706836886\n                    ],\n                    [\n                        121.50276787917367,\n                        31.259833684516153\n                    ],\n                    [\n                        121.50357788125201,\n                        31.260620754296763\n                    ],\n                    [\n                        121.5042378663102,\n                        31.261118737077002\n                    ],\n                    [\n                        121.50480793098683,\n                        31.26141769524606\n                    ],\n                    [\n                        121.50647689279383,\n                        31.262165703841905\n                    ],\n                    [\n                        121.5069168828326,\n                        31.26246573903356\n                    ],\n                    [\n                        121.50760588315876,\n                        31.26300669511107\n                    ],\n                    [\n                        121.50832488688894,\n                        31.26376672925076\n                    ],\n                    [\n                        121.51197892421189,\n                        31.266499683458143\n                    ],\n                    [\n                        121.51317591630394,\n                        31.26740568612683\n                    ],\n                    [\n                        121.51406389130055,\n                        31.26793172077981\n                    ],\n                    [\n                        121.51493192391483,\n                        31.26832873338361\n                    ],\n                    [\n                        121.51562990729609,\n                        31.26853468541864\n                    ],\n                    [\n                        121.51611894481572,\n                        31.26862874878605\n                    ],\n                    [\n                        121.51739588609816,\n                        31.26903069692397\n                    ],\n                    [\n                        121.51842193065164,\n                        31.269421686091146\n                    ],\n                    [\n                        121.51887090374554,\n                        31.269636741010125\n                    ],\n                    [\n                        121.5196779414157,\n                        31.270086680288752\n                    ],\n                    [\n                        121.52044491466012,\n                        31.270685695725305\n                    ],\n                    [\n                        121.52335192112096,\n                        31.273534728158737\n                    ],\n                    [\n                        121.52392890275001,\n                        31.27413372148506\n                    ],\n                    [\n                        121.52443689451592,\n                        31.27464174012355\n                    ],\n                    [\n                        121.52577087819823,\n                        31.275682691311655\n                    ],\n                    [\n                        121.52837794044929,\n                        31.277165743156733\n                    ],\n                    [\n                        121.52946291384424,\n                        31.277774743578718\n                    ],\n                    [\n                        121.52993991407004,\n                        31.277723742935567\n                    ],\n                    [\n                        121.53086588738972,\n                        31.277960691224806\n                    ],\n                    [\n                        121.53173086576528,\n                        31.278316691203948\n                    ],\n                    [\n                        121.53202991166955,\n                        31.27853172564447\n                    ],\n                    [\n                        121.53318387492767,\n                        31.279413693442343\n                    ],\n                    [\n                        121.5347348892212,\n                        31.280432756700833\n                    ],\n                    [\n                        121.5350139029126,\n                        31.280777714192748\n                    ],\n                    [\n                        121.53532193187196,\n                        31.280983715934273\n                    ],\n                    [\n                        121.53679488341668,\n                        31.28136169322867\n                    ],\n                    [\n                        121.53769992621798,\n                        31.281609742407706\n                    ],\n                    [\n                        121.53875390807283,\n                        31.28194975773894\n                    ],\n                    [\n                        121.54159991958956,\n                        31.282562738910116\n                    ],\n                    [\n                        121.5431529101552,\n                        31.28296069231043\n                    ],\n                    [\n                        121.54421794116783,\n                        31.283159745526902\n                    ],\n                    [\n                        121.54503387206255,\n                        31.283293681870948\n                    ],\n                    [\n                        121.54623894890418,\n                        31.283574746972906\n                    ],\n                    [\n                        121.54750295458726,\n                        31.284015746673937\n                    ],\n                    [\n                        121.54882687724788,\n                        31.28476573455922\n                    ],\n                    [\n                        121.55000195068548,\n                        31.28561369735195\n                    ],\n                    [\n                        121.5505799204506,\n                        31.285991733054246\n                    ],\n                    [\n                        121.55183494307859,\n                        31.286818700103822\n                    ],\n                    [\n                        121.5523229026316,\n                        31.287094739904596\n                    ],\n                    [\n                        121.55284194355526,\n                        31.287311682853275\n                    ],\n                    [\n                        121.55401791529837,\n                        31.28804575171626\n                    ],\n                    [\n                        121.55462588846753,\n                        31.288412745409243\n                    ],\n                    [\n                        121.55546292954175,\n                        31.28899173925215\n                    ],\n                    [\n                        121.55738790841906,\n                        31.290229717103838\n                    ],\n                    [\n                        121.56026194706769,\n                        31.29200075215602\n                    ],\n                    [\n                        121.56197986652496,\n                        31.293069744592884\n                    ],\n                    [\n                        121.56227891242925,\n                        31.292790713829934\n                    ],\n                    [\n                        121.56248893625747,\n                        31.292531739826387\n                    ],\n                    [\n                        121.56254894306554,\n                        31.292411702779138\n                    ],\n                    [\n                        121.5625189396615,\n                        31.292251704572532\n                    ],\n                    [\n                        121.5627288736592,\n                        31.291812749550107\n                    ],\n                    [\n                        121.56353869607645,\n                        31.28900639727752\n                    ]\n                ]\n            ]\n        }\n    }\n\n    let pts = [];\n    data.geometry.coordinates[0].forEach(coor => {\n        pts.push(new BMapGL.Point(coor[0], coor[1]));\n    })\n    // 绘制线\n    let polyline = new BMapGL.Polyline(pts, {\n        strokeColor: 'blue',\n        strokeWeight: 10,\n        strokeOpacity: 0.6\n    });\n    map.addOverlay(polyline);\n\n    let icon = createSingleArrowIcon()\n    let polylineArrows = new PolylineArrows('BMapGL', map, data, icon, { correctAngle: 90 });\n\n    /**\n     * 线路单方向箭头图标\n     *  ->\n     * @param width 箭头图标宽度\n     * @param color 箭头颜色\n     * @param lineWidth 箭头厚度\n     * @param angle 箭头夹角程度，数值越小夹角越大\n     */\n    function createSingleArrowIcon(color = '#fff', width = 15, lineWidth = 4, angle = 2) {\n        let canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = width;\n        let ctx = canvas.getContext('2d');\n        ctx.strokeStyle = color;\n        ctx.lineJoin = 'round';\n        ctx.lineWidth = lineWidth;\n        ctx.moveTo(-angle, width - angle);\n        ctx.lineTo(width / 2, 6);\n        ctx.lineTo(width + angle, width - angle);\n        ctx.stroke();\n\n        return canvas.toDataURL();\n    }\n</script>\n\n</html>"
        }
    ]
}